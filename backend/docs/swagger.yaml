basePath: /
definitions:
  main.Archive:
    properties:
      archived_at:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      person_totals:
        items:
          $ref: '#/definitions/main.PersonTotal'
        type: array
      total_amount:
        type: number
      transaction_count:
        type: integer
      updated_at:
        type: string
    type: object
  main.ArchiveRequest:
    properties:
      description:
        type: string
    type: object
  main.Category:
    properties:
      color:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      updated_at:
        type: string
    type: object
  main.Person:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      updated_at:
        type: string
    type: object
  main.PersonTotal:
    properties:
      name:
        type: string
      total:
        type: number
    type: object
  main.Total:
    properties:
      person:
        type: string
      total:
        type: number
    type: object
  main.Transaction:
    properties:
      amount:
        type: number
      assigned_to:
        items:
          type: string
        type: array
      card_number:
        type: string
      category_id:
        type: string
      created_at:
        type: string
      date_uploaded:
        type: string
      description:
        type: string
      file_name:
        type: string
      id:
        type: string
      posted_date:
        type: string
      transaction_date:
        type: string
      updated_at:
        type: string
    type: object
host: localhost:8081
info:
  contact: {}
  description: API for the Joint Analysis expense tracking application
  title: Joint Analysis API
  version: "1.0"
paths:
  /api/archives:
    get:
      description: Retrieve all archives from the database with their person totals
      produces:
      - application/json
      responses:
        "200":
          description: List of archives with transaction counts and person totals
          schema:
            items:
              $ref: '#/definitions/main.Archive'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get all archives
      tags:
      - archives
    post:
      consumes:
      - application/json
      description: Create a new archive of all current active transactions
      parameters:
      - description: Archive data with description
        in: body
        name: archive
        required: true
        schema:
          $ref: '#/definitions/main.ArchiveRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created archive with transaction totals
          schema:
            $ref: '#/definitions/main.Archive'
        "400":
          description: Bad request (no transactions to archive or invalid data)
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Create archive
      tags:
      - archives
  /api/archives/{id}/transactions:
    get:
      description: Get all transactions for a specific archive by archive ID
      parameters:
      - description: Archive ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of archived transactions
          schema:
            items:
              $ref: '#/definitions/main.Transaction'
            type: array
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Archive not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get archive transactions
      tags:
      - archives
  /api/categories:
    get:
      description: Retrieve all categories from the database
      produces:
      - application/json
      responses:
        "200":
          description: List of categories
          schema:
            items:
              $ref: '#/definitions/main.Category'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get all categories
      tags:
      - categories
    post:
      consumes:
      - application/json
      description: Create a new category in the system
      parameters:
      - description: Category data (name required, description and color optional)
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/main.Category'
      produces:
      - application/json
      responses:
        "201":
          description: Created category
          schema:
            $ref: '#/definitions/main.Category'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "409":
          description: Category already exists
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Create category
      tags:
      - categories
  /api/categories/{id}:
    delete:
      description: Delete a specific category by ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Category deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Category not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Delete category
      tags:
      - categories
    put:
      consumes:
      - application/json
      description: Update an existing category
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: string
      - description: Updated category data
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/main.Category'
      produces:
      - application/json
      responses:
        "200":
          description: Updated category
          schema:
            $ref: '#/definitions/main.Category'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Category not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Update category
      tags:
      - categories
  /api/people:
    get:
      description: Retrieve all people from the database
      produces:
      - application/json
      responses:
        "200":
          description: List of people
          schema:
            items:
              $ref: '#/definitions/main.Person'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get all people
      tags:
      - people
    post:
      consumes:
      - application/json
      description: Create a new person in the system
      parameters:
      - description: Person data (name required, email optional)
        in: body
        name: person
        required: true
        schema:
          $ref: '#/definitions/main.Person'
      produces:
      - application/json
      responses:
        "201":
          description: Created person
          schema:
            $ref: '#/definitions/main.Person'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "409":
          description: Person already exists
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Create person
      tags:
      - people
  /api/people/{id}:
    delete:
      description: Delete a specific person by ID
      parameters:
      - description: Person ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Person deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Person not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Delete person
      tags:
      - people
  /api/totals:
    get:
      description: Get calculated expense totals for each person from active transactions
      produces:
      - application/json
      responses:
        "200":
          description: List of totals by person
          schema:
            items:
              $ref: '#/definitions/main.Total'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get totals by person
      tags:
      - totals
  /api/transactions:
    delete:
      description: Clear all active transactions from the database
      produces:
      - application/json
      responses:
        "200":
          description: All transactions cleared successfully
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Delete all transactions
      tags:
      - transactions
    get:
      description: Retrieve all active (non-archived) transactions from the database
      produces:
      - application/json
      responses:
        "200":
          description: List of transactions
          schema:
            items:
              $ref: '#/definitions/main.Transaction'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get all transactions
      tags:
      - transactions
  /api/transactions/{id}:
    delete:
      description: Delete a specific transaction by ID
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Transaction deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Transaction not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Delete single transaction
      tags:
      - transactions
  /api/transactions/{id}/assign:
    put:
      consumes:
      - application/json
      description: Assign a specific transaction to one or more people
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: string
      - description: Assignment data with array of person names
        in: body
        name: assignment
        required: true
        schema:
          properties:
            assigned_to:
              items:
                type: string
              type: array
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated transaction with assignments
          schema:
            $ref: '#/definitions/main.Transaction'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Transaction not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Assign transaction to person
      tags:
      - transactions
  /api/transactions/{id}/category:
    put:
      consumes:
      - application/json
      description: Update the category of a specific transaction
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: string
      - description: Category data with category_id (null to remove category)
        in: body
        name: category
        required: true
        schema:
          properties:
            category_id:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Category updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Transaction not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Update transaction category
      tags:
      - transactions
  /api/upload-csv:
    post:
      consumes:
      - multipart/form-data
      description: Upload a CSV file containing transaction data
      parameters:
      - description: CSV file to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Upload successful
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Upload CSV file
      tags:
      - transactions
swagger: "2.0"
